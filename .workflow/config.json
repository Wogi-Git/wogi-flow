{
  "version": "1.4",
  "projectName": "",

  "workflow": {
    "planningStyle": "feature-based",
    "agentStructure": "unified"
  },

  "loops": {
    "enabled": true,
    "maxRetries": 5,
    "maxIterations": 20,
    "commitEvery": 3,
    "pauseBetweenScenarios": false
  },
  
  "corrections": {
    "mode": "inline",
    "detailPath": ".workflow/corrections"
  },
  
  "phases": {
    "enabled": false,
    "definitions": []
  },
  
  "mandatorySteps": {
    "afterTask": [],
    "beforeCommit": [],
    "onSessionEnd": ["updateRequestLog", "updateAppMap"]
  },
  
  "autoLog": true,
  "autoUpdateAppMap": true,
  
  "qualityGates": {
    "feature": {
      "require": ["tests", "appMapUpdate", "requestLogEntry"],
      "optional": ["review", "docs"]
    },
    "bugfix": {
      "require": ["tests", "requestLogEntry"],
      "optional": ["review"]
    },
    "refactor": {
      "require": ["tests", "noNewFeatures"],
      "optional": ["review"]
    }
  },
  
  "strictMode": {
    "verificationChecklist": false,
    "correctionReportsOnFail": false,
    "featureReportsOnComplete": false
  },
  
  "requireApproval": [],
  
  "componentRules": {
    "preferVariants": true,
    "requireAppMapEntry": true,
    "requireDetailDoc": false,
    "autoGenerateStorybook": false,
    "storybookPath": "src/stories"
  },
  
  "testing": {
    "runAfterTask": false,
    "runBeforeCommit": false,
    "browserTests": false,
    "browserTestUrl": "http://localhost:3000"
  },
  
  "hooks": {
    "preCommit": false
  },
  
  "skills": {
    "installed": []
  },

  "skillLearning": {
    "enabled": true,
    "autoExtract": true,
    "triggers": {
      "onCommit": true,
      "onTaskComplete": true,
      "onCompact": true
    },
    "minCorrectionsToLearn": 1,
    "autoCreateSkills": "ask"
  },

  "componentIndex": {
    "autoScan": true,
    "scanOn": ["sessionStart"],
    "directories": ["src/components", "src/hooks", "src/services", "src/pages", "src/modules", "app"],
    "ignore": ["*.test.*", "*.spec.*", "*.stories.*", "index.ts", "index.js", "__tests__", "__mocks__"]
  },

  "traces": {
    "saveTo": ".workflow/traces",
    "generateDiagrams": true
  },

  "hybrid": {
    "enabled": false,
    "provider": null,
    "providerEndpoint": null,
    "model": null,
    "settings": {
      "temperature": 0.7,
      "maxTokens": 4096,
      "maxRetries": 2,
      "timeout": 120000,
      "autoExecute": false,
      "createBranch": false,
      "tokenEstimation": {
        "enabled": true,
        "minTokens": 1000,
        "maxTokens": 8000,
        "defaultLevel": "medium",
        "logMetrics": true
      }
    },
    "templates": {
      "directory": "templates/hybrid"
    },
    "projectContext": {
      "uiFramework": null,
      "componentPaths": {},
      "typePaths": {
        "features": "../api/types"
      },
      "doNotImport": ["React"],
      "noExternalUtils": true
    }
  },

  "validation": {
    "afterFileEdit": {
      "enabled": false,
      "commands": {
        "*.ts": ["npx tsc --noEmit"],
        "*.tsx": ["npx tsc --noEmit", "npx eslint {file} --fix"],
        "*.js": ["npx eslint {file} --fix"],
        "*.jsx": ["npx eslint {file} --fix"]
      },
      "fixErrorsBeforeContinuing": true
    },
    "afterTaskComplete": {
      "enabled": true,
      "commands": ["npm run lint", "npm run typecheck"]
    },
    "beforeCommit": {
      "enabled": true,
      "commands": ["npm run lint", "npm run typecheck", "npm run test"]
    }
  },

  "agents": {
    "enabled": ["orchestrator", "story-writer", "developer", "reviewer", "tester"],
    "optional": ["accessibility", "security", "performance", "docs", "design-system", "onboarding"]
  }
}
